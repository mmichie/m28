# Test list methods

# Test append (mutates in place)
(= lst [1, 2, 3])
(. lst append 4)
(assert (== (len lst) 4) "append() length failed")
(assert (== (nth lst 3) 4) "append() value failed")

# Test extend (mutates in place)
(= lst2 [1, 2, 3])
(. lst2 extend [4, 5])
(assert (== (len lst2) 5) "extend() length failed")
(assert (== (nth lst2 4) 5) "extend() last value failed")

# Test insert (mutates in place)
(= base_list [1, 3])
(. base_list insert 1 2)
(assert (== base_list [1, 2, 3]) "insert() failed")

# Test pop (mutates in place, returns popped value)
(= pop_list [1, 2, 3])
(= val (. pop_list pop))
(assert (== val 3) "pop() default failed")
(assert (== pop_list [1, 2]) "pop() should modify list")
(= val2 (. pop_list pop 0))
(assert (== val2 1) "pop(0) failed")
(assert (== pop_list [2]) "pop(0) should modify list")

# Test index
(= idx_list [1, 2, 3, 2])
(assert (== (. idx_list index 2) 1) "index() failed")

# Test count
(= cnt_list [1, 2, 3, 2, 2])
(assert (== (. cnt_list count 2) 3) "count() failed")

# Test reverse (mutates in place, returns None)
(= rev_list [1, 2, 3])
(. rev_list reverse)
(assert (== rev_list [3, 2, 1]) "reverse() failed")

# Test sort (mutates in place, returns None)
(= srt_list [3, 1, 4, 1, 5])
(. srt_list sort)
(assert (== srt_list [1, 1, 3, 4, 5]) "sort() failed")

# Test remove (mutates in place)
(= rm_list [1, 2, 3, 2])
(. rm_list remove 2)
(assert (== rm_list [1, 3, 2]) "remove() failed")

# Test contains
(= cont_list [1, 2, 3])
(assert (. cont_list contains 2) "contains(2) should be true")
(assert (not (. cont_list contains 5)) "contains(5) should be false")

# Test get
(= get_list [10, 20, 30])
(assert (== (. get_list get 0) 10) "get(0) failed")
(assert (== (. get_list get 1) 20) "get(1) failed")
(assert (== (. get_list get 2) 30) "get(2) failed")
(assert (== (. get_list get -1) 30) "get(-1) failed")

# Test length
(assert (== (. get_list length) 3) "length failed")

# Test map
(= nums [1, 2, 3])
(= doubled (. nums map (lambda (x) (* x 2))))
(assert (== doubled [2, 4, 6]) "map() failed")

# Test filter
(= mixed [1, 2, 3, 4, 5, 6])
(= evens (. mixed filter (lambda (x) (== (% x 2) 0))))
(assert (== evens [2, 4, 6]) "filter() failed")

(print "All list method tests passed!")
