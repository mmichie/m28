# Test set methods

# Create test sets
(= s1 (set [1, 2, 3]))
(= s2 (set [3, 4, 5]))
(= s3 (set [1, 2]))
(= empty (set []))

(print "Test sets:")
(print "s1 =" s1)
(print "s2 =" s2)
(print "s3 =" s3)
(print "empty =" empty)

# Test set operations
(print "\n=== Set Operations ===")

# Union
(print "\nUnion:")
(print "s1.union(s2) =" (. s1 union s2))
(assert (== (. (. s1 union s2) length) 5) "Union should have 5 elements")
(print "empty.union(s1) =" (. empty union s1))

# Intersection
(print "\nIntersection:")
(print "s1.intersection(s2) =" (. s1 intersection s2))
(assert (== (. (. s1 intersection s2) length) 1) "Intersection should have 1 element")
(print "s1.intersection(s3) =" (. s1 intersection s3))
(print "s1.intersection(empty) =" (. s1 intersection empty))

# Difference
(print "\nDifference:")
(print "s1.difference(s2) =" (. s1 difference s2))
(assert (== (. (. s1 difference s2) length) 2) "Difference should have 2 elements")
(print "s2.difference(s1) =" (. s2 difference s1))
(print "s1.difference(s3) =" (. s1 difference s3))

# Test mutating methods
(print "\n=== Mutating Methods ===")

# Add
(print "\nAdd:")
(= s4 (set [1, 2]))
(. s4 add 3)
(print "After s4.add(3):" s4)
(assert (. s4 contains 3) "Set should contain 3 after add")

# Remove
(print "\nRemove:")
(= s5 (set [1, 2, 3]))
(. s5 remove 2)
(print "After s5.remove(2):" s5)
(assert (not (. s5 contains 2)) "Set should not contain 2 after remove")

# Contains
(print "\n=== Contains ===")
(assert (. s1 contains 1) "s1 should contain 1")
(assert (. s1 contains 2) "s1 should contain 2")
(assert (. s1 contains 3) "s1 should contain 3")
(assert (not (. s1 contains 4)) "s1 should not contain 4")

# Length
(print "\n=== Length ===")
(assert (== (. s1 length) 3) "s1 length should be 3")
(assert (== (. empty length) 0) "empty length should be 0")

# Test with 'in' operator
(print "\n=== Membership Test ===")
(print "1 in s1 =" (in 1 s1))
(print "10 in s1 =" (in 10 s1))

(print "\nAll set method tests passed!")
