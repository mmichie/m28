# Test script to demonstrate new REPL features

# Test 1: IPython-style execution counting and output history
(print "=== Testing IPython-style features ===")
(+ 1 2)        # Should show Out[n]: 3
(* 10 20)      # Should show Out[n]: 200
(print _)      # Should print last result (200)
(print _1)     # Should print first result (3)

# Test 2: Multi-line input with smart indentation
(print "\n=== Testing multi-line input ===")
(def factorial (n)
    (if (<= n 1)
        1
        (* n (factorial (- n 1)))))

(factorial 5)  # Should show 120

# Test 3: Error handling with context
(print "\n=== Testing error reporting ===")
# This will cause an error
# (undefined_function 42)

# Test 4: REPL commands to try manually:
(print "\n=== REPL Commands to try ===")
(print ":help                - Show REPL commands")
(print ":history 5           - Show last 5 commands")
(print ":toggle-colors       - Toggle colored output")
(print ":settings            - Show current settings")
(print "!!                   - Repeat last command")
(print "!3                   - Execute command #3")
(print "!fac                 - Execute most recent command starting with 'fac'")